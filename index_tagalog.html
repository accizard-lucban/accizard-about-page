<!DOCTYPE html>
<html lang="tl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, shrink-to-fit=no, viewport-fit=cover">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="mobile-web-app-capable" content="yes">
    
    <!-- Browser Compatibility Polyfills for Android 8+ and older iOS -->
    <script>
        // Browser feature detection - non-intrusive check
        if (!('fetch' in window && 'Promise' in window && 'IntersectionObserver' in window)) {
            console.warn("Outdated browser detected — polyfills loaded for compatibility.");
        }
    </script>
    
    <!-- Promise Polyfill for older browsers -->
    <script src="https://cdn.jsdelivr.net/npm/promise-polyfill@8/dist/polyfill.min.js" crossorigin="anonymous"></script>
    
    <!-- Fetch Polyfill for older browsers -->
    <script src="https://cdn.jsdelivr.net/npm/whatwg-fetch@3.6.2/dist/fetch.umd.min.js" crossorigin="anonymous"></script>
    
    <!-- Comprehensive Polyfills for modern Web APIs -->
    <script src="https://polyfill.io/v3/polyfill.min.js?features=default,IntersectionObserver,ResizeObserver" crossorigin="anonymous"></script>
    
    <!-- CSS.supports polyfill for older browsers -->
    <script>
        // CSS.supports polyfill for older browsers
        if (!window.CSS || !window.CSS.supports) {
            window.CSS = window.CSS || {};
            window.CSS.supports = function(property, value) {
                var element = document.createElement('div');
                element.style[property] = value;
                return element.style[property] === value;
            };
        }
    </script>
    
    <title>Accizard - Mag-ulat ng Panganib. Makaligtas ng Buhay. Manatiling Ligtas. (v2.0)</title>
    <link rel="stylesheet" href="styles.css?v=20241201">
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@600;700;800&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link
  rel="stylesheet"
  href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
/>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js?v=1"></script>
    
    <!-- Contact Form Configuration -->
    <script>
        // Initialize EmailJS with your public key
        (function() {
            emailjs.init("YOUR_EMAILJS_PUBLIC_KEY"); // Replace with your actual EmailJS public key
        })();
    </script>

</head>
<body>
    <!-- Language Selection Popup -->
    <div id="languagePopup" class="language-popup">
        <div class="language-popup-content">
            <div class="language-popup-header">
                <img src="accizard-favicon-circle.png" alt="AcciZard Logo" class="popup-logo">
                <h2>Maligayang pagdating sa AcciZard Lucban</h2>
                <p>Pakipili ang inyong gustong wika</p>
            </div>
            <div class="language-options">
                <button class="language-btn" data-lang="english" onclick="selectLanguage('english')">
                    <span class="flag-icon">🇬🇧</span>
                    <span class="language-name">English</span>
                </button>
                <button class="language-btn" data-lang="tagalog" onclick="selectLanguage('tagalog')">
                    <span class="flag-icon">🇵🇭</span>
                    <span class="language-name">Tagalog</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Combined Navigation and Hero Section -->
    <section class="nav-hero-section">
        <!-- Navigation Bar -->
        <nav class="nav-hero-nav">
            <div class="nav-hero-container">
                <ul class="nav-hero-links">
                    <li><a href="#about">Tungkol</a></li>
                    <li><a href="#features">Katangian</a></li>
                    <li><a href="#how-it-works">Paano Gumagana</a></li>
                    <li><a href="#screenshots">Demo</a></li>
                    <li><a href="#faq">FAQ</a></li>
                    <li><a href="#news">Balita</a></li>
                </ul>
                
                <!-- Mobile Hamburger Menu -->
                <div class="nav-hero-toggle" id="navToggle">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
            </div>
        </nav>

        <!-- Hero Content -->
        <div class="nav-hero-content">
            <div class="nav-hero-logo">
                <div class="logo-icon">
                    <img src="3.png" alt="AcciZard Logo">
                </div>
            </div>
            
            <p class="nav-hero-tagline">Mag-ulat . Protektahan . Pigilan</p>
            
            <div class="nav-hero-buttons">
                <a href="#contact" class="nav-hero-btn">Makipag-ugnayan sa Amin</a>
                <a href="#download-apk" class="nav-hero-btn">I-download ang App</a>
            </div>
        </div>
    </section>

    <!-- Promotional Video Section -->
    <section class="promotional-video-section">
        <div class="promotional-video-container">
            <div class="promotional-video-content">
                <div class="promotional-video-text">
                    <h2 class="promotional-video-title">AcciZard Lucban</h2>
                    <p class="promotional-video-description">
                        Ang inyong libre, komunidad na pinapatakbo na app para sa pag-uulat ng mga aksidente, panganib, at
                        mga kalamidad sa Lucban, Quezon. Maging residente, turista, o dumadaan lamang,
                        tulungan ninyong panatilihing ligtas ang aming bayan sa pamamagitan ng pag-uulat ng mga insidente sa real time.
                        Sama-sama, maiiwasan natin ang mga aksidente bago pa mangyari.
                    </p>
                </div>
                <div class="promotional-video-player">
                    <div class="video-player-wrapper">
                        <video autoplay muted loop playsinline>
                            <source src="tpv.mp4" type="video/mp4">
                            Hindi sinusuportahan ng inyong browser ang video tag.
                        </video>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- About Section -->
<section id="about" class="about-section">
  <div class="about-container">
    <!-- Left side logo -->
    <div class="about-logo">
      <img src="accizard-favicon-circle.png" alt="Accizard Logo">
    </div>

    <!-- Right side content -->
    <div class="about-text">
      <h2>TUNGKOL SA ACCIZARD</h2>
      <p>
        Isang makabagong web application na layuning mapabuti ang kaligtasan sa lungsod ng Lucban. Kaakibat ng UN Sustainable Development Goal 11: Sustainable Cities and Communities, binibigyang-kapangyarihan ng aming plataporma ang mga mamamayan na mag-ulat ng aksidente at subaybayan ang mga panganib sa kanilang paligid sa real-time.
      </p>
      <p>
        Binuo ng isang masigasig na grupo ng mga mananaliksik mula sa Southern Luzon State University, ang AcciZard Lucban ay nagtataguyod ng pagtutulungan at kamalayan sa pamamagitan ng isang madaling gamitin na interface para sa pagmamanman ng mga panganib. Sa sama-samang pagsisikap, layunin naming lumikha ng mas ligtas at mas napapanatiling komunidad sa pamamagitan ng pagsasanib ng teknolohiya at pampublikong kaligtasan.
      </p>
      <p>
        Sama-sama nating buuin ang matatag na Lucban — mag-ulat, subaybayan, at maging daan sa pagbabago!
      </p>
    </div>
  </div>
    <!-- Mission & Vision Section -->
  <div class="mission-vision">
    <div class="mission">
      <h3>Misyon</h3>
      <p>
        Ang aming misyon ay mapalakas ang kaligtasan at katatagan ng lungsod ng Lucban sa pamamagitan ng paggamit ng teknolohiya upang magbigay ng maaasahan at madaling gamitin na plataporma para sa pag-uulat ng mga aksidente at pagsubaybay sa mga panganib. Nais naming bigyan ng kapangyarihan ang mga mamamayan sa pamamagitan ng mga kasangkapang nagbibigay ng real-time na kaalaman, hikayatin ang aktibong pakikilahok ng komunidad, at paigtingin ang kultura ng kahandaan at pagtutulungan. Sa pagsunod sa mga pandaigdigang layunin para sa napapanatiling kaunlaran, layunin naming bumuo ng mga komunidad na mas ligtas, mas matalino, at tunay na napapanatili — para sa kasalukuyan at susunod na henerasyon.
      </p>
    </div>

    <div class="vision">
      <h3>Bisyon</h3>
      <p>
        Layunin naming maging ang AcciZard Lucban bilang haligi ng kaligtasan sa lungsod ng Lucban — isang lugar kung saan nagkakaisa ang teknolohiya at pagtutulungan ng komunidad upang lumikha ng mas ligtas at mas napapanatiling kapaligiran. Hangad naming hikayatin ang mas aktibong pakikilahok ng mga mamamayan, magtatag ng mapagkakatiwalaang network para sa pagsubaybay ng mga panganib, at makapag-ambag sa pagbuo ng mga lungsod na handa sa sakuna. Sa pamamagitan ng inobasyon at dedikasyon, ninanais naming makilala bilang huwarang modelo ng mga napapanatiling solusyon para sa kaligtasan ng mga lungsod — dito sa ating bansa at sa buong mundo.
      </p>
    </div>
  </div>
</section>


    <!-- Features Section -->
    <section id="features" class="section_features">
        <div class="container">
            <h2 class="section-title">Mga Katangian ng Accizard</h2>
            <p class="section-subtitle">Makapangyarihang mga kasangkapan para sa kaligtasan ng komunidad</p>
            <div class="features-grid">
                <div class="feature-card">
                    <div class="feature-number">01</div>
                    <div class="feature-icon">📍</div>
                    <h3 class="feature-title">Geotagged na Pag-uulat</h3>
                    <p class="feature-description">Magpasa ng detalyadong ulat na may larawan, lokasyon, at paglalarawan direkta sa MDRRMO.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-number">02</div>
                    <div class="feature-icon">🗺️</div>
                    <h3 class="feature-title">Interaktibong Mapa ng Panganib</h3>
                    <p class="feature-description">Tingnan ang mga beripikadong ulat, panganib, at mga ligtas na lugar sa paligid ng Lucban sa isang interaktibong mapa.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-number">03</div>
                    <div class="feature-icon">💬</div>
                    <h3 class="feature-title">Suporta sa Chat</h3>
                    <p class="feature-description">Makipag-ugnayan sa MDRRMO direkta sa pamamagitan ng ligtas na in-app chat para sa agarang tulong.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-number">04</div>
                    <div class="feature-icon">📢</div>
                    <h3 class="feature-title">Anunsiyo</h3>
                    <p class="feature-description">Manatiling updated sa mga lokal na babala, anunsiyo, at mahahalagang impormasyon ukol sa kaligtasan.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-number">05</div>
                    <div class="feature-icon">📊</div>
                    <h3 class="feature-title">Pagpapakita ng Datos</h3>
                    <p class="feature-description">Tingnan ang mga pagsusuri at trend mula sa mga beripikadong ulat upang manatiling may alam tungkol sa iyong lugar.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- How It Works -->
    <section id="how-it-works" class="section how-it-works">
        <div class="container">
            <h2 class="section-title">Paano Ito Gumagana</h2>
            <p class="section-subtitle">Simpleng 4 na paraan para sa ligtas na komunidad</p>
            <div class="steps-grid">
                <div class="step">
                    <div class="step-number">
                        <div class="step-icon">💡</div>
                    </div>
                    <h3 class="step-title">TUKUYIN</h3>
                    <p class="step-description">Kilalanin ang panganib o isyung may kinalaman sa kaligtasan sa iyong paligid</p>
                </div>
                <div class="step">
                    <div class="step-number">
                        <div class="step-icon">📱</div>
                    </div>
                    <h3 class="step-title">IULAT</h3>
                    <p class="step-description">Kunan ng larawan o video at isumite kasama ng lokasyon gamit ang GPS</p>
                </div>
                <div class="step">
                    <div class="step-number">
                        <div class="step-icon">🔍</div>
                    </div>
                    <h3 class="step-title">SURIIN</h3>
                    <p class="step-description">Tinitingnan at pinatutunayan ng mga admin ang iniulat na insidente</p>
                </div>
                <div class="step">
                    <div class="step-number">
                        <div class="step-icon">⚡</div>
                    </div>
                    <h3 class="step-title">TUMUGON</h3>
                    <p class="step-description">Isinasagawa ang angkop na aksyon upang matugunan ang natukoy na panganib</p>
                </div>
            </div>
        </div>
    </section>



    <!-- Screenshots Section -->
    <section id="screenshots" class="section_ss">
  <div class="container">
    <h2 class="section-title">Screenshots at Demo Preview</h2>
    <p class="section-subtitle">Tingnan ang Accizard sa pagkilos</p>

    <div class="screenshots-grid">
      <div class="image-card" data-carousel="true">
        <img src="8.jpg" alt="AcciZard Feature Preview">
        <div class="image-overlay">
          <h3>See more...</h3>
        </div>
      </div>

      <div class="video-card" data-video="mobapp.mp4">
        <video src="mobapp.mp4" muted loop></video>
        <div class="video-overlay">
          <h3>Mobile App Interface</h3>
          <div class="play-btn">▶</div>
        </div>
      </div>

      <div class="video-card" data-video="mobile.mp4">
        <video src="mobile.mp4" muted loop></video>
        <div class="video-overlay">
          <h3>Web Admin Dashboard</h3>
          <div class="play-btn">▶</div>
        </div>
      </div>
    </div>
  </div>

  <!-- Expanded video popup -->
  <div class="video-popup">
    <div class="video-popup-content">
      <span class="close-btn">&times;</span>
      <video controls autoplay></video>
    </div>
  </div>

  <!-- Carousel Modal -->
  <div class="carousel-popup">
    <div class="carousel-popup-content">
      <span class="carousel-close-btn">&times;</span>
        <div class="carousel-container">
          <button class="carousel-nav carousel-prev">
            <img src="button.png" alt="Previous">
          </button>
          <div class="carousel-slides">
            <div class="carousel-slide active" data-index="0">
              <img src="8.jpg" alt="AcciZard Feature 1">
            </div>
            <div class="carousel-slide" data-index="1">
              <img src="9.jpg" alt="AcciZard Feature 2">
            </div>
            <div class="carousel-slide" data-index="2">
              <img src="10.jpg" alt="AcciZard Feature 3">
            </div>
            <div class="carousel-slide" data-index="3">
              <img src="11.jpg" alt="AcciZard Feature 4">
            </div>
            <div class="carousel-slide" data-index="4">
              <img src="12.jpg" alt="AcciZard Feature 5">
            </div>
          </div>
          <button class="carousel-nav carousel-next">
            <img src="button.png" alt="Next">
          </button>
        </div>
      <div class="carousel-indicators">
        <span class="indicator active" data-slide="0"></span>
        <span class="indicator" data-slide="1"></span>
        <span class="indicator" data-slide="2"></span>
        <span class="indicator" data-slide="3"></span>
        <span class="indicator" data-slide="4"></span>
      </div>
    </div>
  </div>
</section>
<script>
const videoCards = document.querySelectorAll('.video-card');
const popup = document.querySelector('.video-popup');
const popupVideo = popup.querySelector('video');
const closeBtn = document.querySelector('.close-btn');

videoCards.forEach(card => {
  card.addEventListener('click', () => {
    const videoSrc = card.getAttribute('data-video');
    popupVideo.src = videoSrc;
    popup.classList.add('active');
    popupVideo.play();
  });
});

closeBtn.addEventListener('click', () => {
  popup.classList.remove('active');
  popupVideo.pause();
  popupVideo.currentTime = 0;
});

// Close on background click
popup.addEventListener('click', (e) => {
  if (e.target === popup) {
    popup.classList.remove('active');
    popupVideo.pause();
    popupVideo.currentTime = 0;
  }
});

// Add hover effects for video preview
videoCards.forEach(card => {
  const video = card.querySelector('video');
  
  card.addEventListener('mouseenter', () => {
    video.play();
  });
  
  card.addEventListener('mouseleave', () => {
    video.pause();
    video.currentTime = 0;
  });
});

// ========================================
// CAROUSEL FUNCTIONALITY
// ========================================

// Carousel elements
const imageCard = document.querySelector('.image-card[data-carousel="true"]');
const carouselPopup = document.querySelector('.carousel-popup');
const carouselCloseBtn = document.querySelector('.carousel-close-btn');
const carouselSlides = document.querySelectorAll('.carousel-slide');
const carouselPrev = document.querySelector('.carousel-prev');
const carouselNext = document.querySelector('.carousel-next');
const indicators = document.querySelectorAll('.indicator');

let currentSlide = 0;
let isTransitioning = false;

// ========================================
// CAROUSEL NAVIGATION FUNCTIONS
// ========================================

// Show specific slide with single image layout
function showSlide(index) {
  if (isTransitioning) return;
  
  isTransitioning = true;
  
  // Hide all slides first
  carouselSlides.forEach((slide, i) => {
    slide.classList.remove('active');
    slide.style.opacity = '0';
    slide.style.zIndex = '1';
  });
  
  // Show the active slide
  const activeSlide = carouselSlides[index];
  if (activeSlide) {
    activeSlide.classList.add('active');
    activeSlide.style.opacity = '1';
    activeSlide.style.zIndex = '2';
  }
  
  // Update indicators
  indicators.forEach((indicator, i) => {
    indicator.classList.toggle('active', i === index);
  });
  
  currentSlide = index;
  
  // Reset transition lock after animation
  setTimeout(() => {
    isTransitioning = false;
  }, 600);
}

// Navigate to next slide
function nextSlide() {
  const next = (currentSlide + 1) % carouselSlides.length;
  showSlide(next);
}

// Navigate to previous slide
function prevSlide() {
  const prev = (currentSlide - 1 + carouselSlides.length) % carouselSlides.length;
  showSlide(prev);
}

// ========================================
// EVENT LISTENERS
// ========================================

// Open carousel modal
imageCard.addEventListener('click', () => {
  carouselPopup.classList.add('active');
  document.body.style.overflow = 'hidden';
  showSlide(0); // Initialize with first slide
});

// Close carousel modal
carouselCloseBtn.addEventListener('click', () => {
  carouselPopup.classList.remove('active');
  document.body.style.overflow = 'auto';
});

// Close on background click
carouselPopup.addEventListener('click', (e) => {
  if (e.target === carouselPopup) {
    carouselPopup.classList.remove('active');
    document.body.style.overflow = 'auto';
  }
});

// Navigation button events
carouselNext.addEventListener('click', nextSlide);
carouselPrev.addEventListener('click', prevSlide);

// Indicator click events
indicators.forEach((indicator, index) => {
  indicator.addEventListener('click', () => {
    showSlide(index);
  });
});

// ========================================
// TOUCH/SWIPE SUPPORT
// ========================================

let touchStartX = 0;
let touchEndX = 0;

// Touch event handlers
carouselPopup.addEventListener('touchstart', (e) => {
  touchStartX = e.changedTouches[0].screenX;
});

carouselPopup.addEventListener('touchend', (e) => {
  touchEndX = e.changedTouches[0].screenX;
  handleSwipe();
});

// Handle swipe gestures
function handleSwipe() {
  const swipeThreshold = 50; // Minimum swipe distance
  const swipeDistance = touchEndX - touchStartX;
  
  if (Math.abs(swipeDistance) > swipeThreshold) {
    if (swipeDistance > 0) {
      // Swipe right - go to previous slide
      prevSlide();
    } else {
      // Swipe left - go to next slide
      nextSlide();
    }
  }
}

// ========================================
// KEYBOARD NAVIGATION
// ========================================

document.addEventListener('keydown', (e) => {
  if (carouselPopup.classList.contains('active')) {
    switch(e.key) {
      case 'ArrowRight':
        e.preventDefault();
        nextSlide();
        break;
      case 'ArrowLeft':
        e.preventDefault();
        prevSlide();
        break;
      case 'Escape':
        e.preventDefault();
        carouselPopup.classList.remove('active');
        document.body.style.overflow = 'auto';
        break;
    }
  }
});

// ========================================
// INITIALIZATION
// ========================================

// Initialize carousel on page load
document.addEventListener('DOMContentLoaded', () => {
  // Ensure all slides start in correct positions
  showSlide(0);
});
</script>

   <section id="faq" class="section faq-section">
  <div class="container">
    <div class="faq-header">
      <div>
        <h2>Mga Madalas <span>Itanong</span> (FAQ)</h2>
        <p>
          Alamin ang higit pa tungkol sa Accizard — kung paano ito gumagana, mga katangian nito, at kung paano ito tumutulong sa iyo na mag-ulat at subaybayan ang mga panganib nang epektibo.
        </p>
      </div>
    </div>

    <div class="faq-container">
      <div class="faq-item">
        <button class="faq-question">
          Libre bang gamitin ang AcciZard?
          <span class="faq-icon">+</span>
        </button>
        <div class="faq-answer">
          Oo, libre gamitin ang AcciZard para sa lahat ng residente ng Lucban, Quezon, pati na rin sa mga turista at dumaraan. Idinisenyo ito para lamang sa pag-uulat ng mga aksidente sa kalsada, pinsalang dulot ng mga kalamidad, at mga potensyal na panganib na maaaring magdulot ng aksidente sa hinaharap.
        </div>
      </div>

      <div class="faq-item">
        <button class="faq-question">
          Magagamit ko ba ang AcciZard kahit walang internet?
          <span class="faq-icon">+</span>
        </button>
        <div class="faq-answer">
          Hindi. Kailangan ng AcciZard ng koneksyon sa internet upang makapag-login, makapagsumite ng ulat, at ma-sync ang datos sa web dashboard.
        </div>
      </div>

      <div class="faq-item">
        <button class="faq-question">
          Anong mga uri ng panganib ang maaaring iulat?
          <span class="faq-icon">+</span>
        </button>
        <div class="faq-answer">
          Tumatanggap ang AcciZard ng mga ulat tungkol sa lahat ng uri ng panganib sa kaligtasan — kabilang ang kondisyon ng kalsada, pinsala sa imprastruktura, panganib sa kapaligiran, at mga emerhensiya.
        </div>
      </div>

      <div class="faq-item" id="download-apk">
  <button class="faq-question">
    Paano i-download ang APK ng mobile app?
    <span class="faq-icon">+</span>
  </button>
  <div class="faq-answer">
    Maaari mong i-download ang pinakabagong bersyon ng AcciZard mobile app sa pamamagitan ng pag-click sa link sa ibaba. Siguraduhing naka-enable ang opsyong "Install from Unknown Sources" sa mga settings ng iyong device upang ma-install nang maayos ang app kahit hindi ito galing sa opisyal na app store.
    <br><br>
    <a href="accizard.txt" download class="download-link">
      📱 I-download ang Accizard APK
    </a>
  </div>
</div>
    </div>
  </div>
</section>

    <!-- News Updates Section -->
    <section id="news" class="news-section">
        <div class="container">
            <h2 class="section-title">Pinakabagong Balita</h2>
            <p class="section-subtitle">Manatiling nakabalita sa pinakabagong update mula sa PAGASA, DOST, at NDRRMC</p>
            
            <div class="news-carousel">
                <button class="carousel-btn prev-btn" id="prevBtn">❮</button>
                <button class="carousel-btn next-btn" id="nextBtn">❯</button>
                <div class="news-container">
                    <!-- News items will be dynamically loaded here by JavaScript -->
                </div>
            </div>
        </div>
    </section>

    <!-- Contact Us Popup -->
    <div id="contactPopup" class="contact-popup">
        <div class="contact-popup-content">
            <span class="contact-close-btn">&times;</span>
            <h2>MAKIPAG-UGNAYAN SA AMIN</h2>
            <form id="contactForm">
                <div class="form-row">
                    <div class="form-group">
                        <label for="firstName">UNANG PANGALAN</label>
                        <input type="text" id="firstName" name="firstName" required>
                    </div>
                    <div class="form-group">
                        <label for="lastName">APELYIDO</label>
                        <input type="text" id="lastName" name="lastName" required>
                    </div>
                </div>
                <div class="form-group">
                    <label for="email">Email Address</label>
                    <input type="email" id="email" name="email" required>
                </div>
                <div class="form-group">
                    <label for="subject">Paksa</label>
                    <input type="text" id="subject" name="subject" required>
                </div>
                <div class="form-group message-group">
                    <label for="message">MENSAHE</label>
                    <div class="message-container">
                        <textarea id="message" name="message" rows="5" required></textarea>
                        <button type="submit" class="send-btn">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M22 2L11 13" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M22 2L15 22L11 13L2 9L22 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </button>
                    </div>
                </div>
                <div id="contactMessage" class="contact-message"></div>
            </form>
        </div>
    </div>

    <!-- Success Notification Popup -->
    <div id="successPopup" class="success-popup">
        <div class="success-popup-content">
            <div class="success-icon">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M9 12L11 14L15 10" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
                </svg>
            </div>
            <h3 class="success-title">Tagumpay</h3>
            <p class="success-message">Matagumpay na naipadala ang mensahe! Makikipag-ugnayan kami sa inyo sa lalong madaling panahon.</p>
            <button class="success-close-btn">OK</button>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>Accizard</h3>
                    <p>Ginagawang mas ligtas ang mga komunidad sa pamamagitan ng makabagong teknolohiya sa pag-uulat ng panganib.</p>

                </div>
                <div class="footer-section">
                    <h3>Makipag-ugnayan</h3>
                    <a href="mailto:info@accizard.com">accizardlucban@gmail.com</a>
                    <p>Suporta 24/7</p>
                </div>
                <div class="footer-section">
                    <h3>Mabilis na Link</h3>
                    <a href="#about">Tungkol sa Amin</a>
                    <a href="#features">Mga Katangian</a>
                    <a href="#faq">FAQ</a>
                    
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 Accizard. Nakalaan ang lahat ng karapatan.</p>
            </div>
        </div>
    </footer>

    <!-- Language Selection Script -->
    <script>
        // Language Selection and Preference Management
        function checkLanguagePreference() {
            const languagePreference = localStorage.getItem('languagePreference');
            const languagePopup = document.getElementById('languagePopup');
            const currentPath = window.location.pathname;
            
            if (languagePreference) {
                // User has already selected a language
                languagePopup.style.display = 'none';
                
                // If they selected Tagalog but are NOT on /tagalog, redirect
                if (languagePreference === 'tagalog' && currentPath !== '/tagalog') {
                    window.location.href = '/tagalog';
                }
                // If they selected English but are on /tagalog, redirect to root
                else if (languagePreference === 'english' && currentPath === '/tagalog') {
                    window.location.href = '/';
                }
            } else {
                // First time visitor - show the popup
                languagePopup.style.display = 'flex';
                document.body.style.overflow = 'hidden';
            }
        }
        
        function selectLanguage(language) {
            // Save preference to localStorage
            localStorage.setItem('languagePreference', language);
            
            const languagePopup = document.getElementById('languagePopup');
            
            // Add fade out animation
            languagePopup.style.opacity = '0';
            
            setTimeout(() => {
                languagePopup.style.display = 'none';
                document.body.style.overflow = 'auto';
                
                // Redirect to appropriate page using clean URLs
                if (language === 'tagalog') {
                    window.location.href = '/tagalog';
                } else {
                    window.location.href = '/';
                }
            }, 300);
        }
        
        // Check language preference when page loads
        window.addEventListener('DOMContentLoaded', checkLanguagePreference);
    </script>

    <!-- Daily Email Limit Management Script -->
    <script>
        // Daily Email Limit System
        const DAILY_EMAIL_LIMIT = 450;
        
        function getTodayString() {
            return new Date().toDateString();
        }
        
        function getDailyEmailCount() {
            const today = getTodayString();
            const countData = localStorage.getItem('dailyEmailCount');
            
            if (!countData) {
                return 0;
            }
            
            try {
                const parsed = JSON.parse(countData);
                // If it's a new day, reset count
                if (parsed.date !== today) {
                    return 0;
                }
                return parsed.count || 0;
            } catch (error) {
                console.error('Error parsing daily email count:', error);
                return 0;
            }
        }
        
        function incrementDailyEmailCount() {
            const today = getTodayString();
            const currentCount = getDailyEmailCount();
            const newCount = currentCount + 1;
            
            const countData = {
                date: today,
                count: newCount
            };
            
            localStorage.setItem('dailyEmailCount', JSON.stringify(countData));
            return newCount;
        }
        
        function checkEmailLimit() {
            const currentCount = getDailyEmailCount();
            return currentCount >= DAILY_EMAIL_LIMIT;
        }
        
        function showLimitReachedPopup() {
            const successPopup = document.getElementById('successPopup');
            const successTitle = successPopup.querySelector('.success-title');
            const successMessage = successPopup.querySelector('.success-message');
            
            // Update popup content for limit reached (Tagalog)
            successTitle.textContent = 'Naabot na ang Limit sa Araw';
            successMessage.textContent = 'Paumanhin, naabot na namin ang aming pang-araw-araw na limit sa email. Pakisubukan ulit bukas. Salamat sa inyong pag-unawa!';
            
            // Show the popup
            successPopup.classList.add('active');
            document.body.style.overflow = 'hidden';
        }
        
        function resetSuccessPopup() {
            const successPopup = document.getElementById('successPopup');
            const successTitle = successPopup.querySelector('.success-title');
            const successMessage = successPopup.querySelector('.success-message');
            
            // Reset to original content (Tagalog)
            successTitle.textContent = 'Tagumpay';
            successMessage.textContent = 'Matagumpay na naipadala ang mensahe! Makikipag-ugnayan kami sa inyo sa lalong madaling panahon.';
        }
    </script>

    <script>
    // NewsData.io API Configuration
    const NEWS_API_KEY = 'pub_e50a94871c1640aaa68bf69837585a15';
    const NEWS_API_URL = 'https://newsdata.io/api/1/news';
    
    // Embedded cache data (works with file:// protocol) - 3 articles per source (9 total)
    window.CACHED_NEWS_DATA = {
      "articles": [
        // PAGASA Articles (3)
        {
          "id": "PAGASA_1728678000_001",
          "title": "PAGASA Issues Weather Advisory for Tropical Depression",
          "description": "The Philippine Atmospheric, Geophysical and Astronomical Services Administration warns of potential flooding in low-lying areas as a tropical depression approaches the eastern seaboard. Residents are advised to monitor weather updates and prepare emergency kits.",
          "link": "https://www.pagasa.dost.gov.ph/tropical-cyclone-bulletin",
          "image": "https://images.unsplash.com/photo-1504608524841-42fe6f032b4b?w=300&h=200&fit=crop&crop=center",
          "source": "PAGASA",
          "time": "1 hour ago",
          "publishedAt": "2024-10-12T11:00:00Z",
          "category": "environment"
        },
        {
          "id": "PAGASA_1728674400_002",
          "title": "Typhoon Season Outlook: Enhanced Monitoring Systems",
          "description": "PAGASA announces deployment of advanced weather monitoring systems across the archipelago to improve typhoon tracking and early warning capabilities for the upcoming season.",
          "link": "https://www.pagasa.dost.gov.ph/climate-monitoring",
          "image": "https://images.unsplash.com/photo-1446776877081-d282a0f896e2?w=300&h=200&fit=crop&crop=center",
          "source": "PAGASA",
          "time": "3 hours ago",
          "publishedAt": "2024-10-12T09:00:00Z",
          "category": "environment"
        },
        {
          "id": "PAGASA_1728670800_003",
          "title": "Climate Data Shows Rising Sea Temperatures",
          "description": "Latest oceanographic data reveals significant warming trends in Philippine waters, affecting marine ecosystems and weather patterns nationwide. Scientists urge immediate climate action.",
          "link": "https://www.pagasa.dost.gov.ph/climate-data",
          "image": "https://images.unsplash.com/photo-1611273426858-450d8e3c9fce?w=300&h=200&fit=crop&crop=center",
          "source": "PAGASA",
          "time": "5 hours ago",
          "publishedAt": "2024-10-12T07:00:00Z",
          "category": "environment"
        },
        
        // DOST Articles (3)
        {
          "id": "DOST_1728678000_001",
          "title": "DOST Launches AI-Powered Disaster Early Warning System",
          "description": "Revolutionary artificial intelligence system can predict natural disasters 72 hours in advance, potentially saving thousands of lives. The system integrates weather data, seismic readings, and satellite imagery.",
          "link": "https://www.dost.gov.ph/news/dost-launches-ai-powered-disaster-early-warning-system",
          "image": "https://images.unsplash.com/photo-1518709268805-4e9042af2176?w=300&h=200&fit=crop&crop=center",
          "source": "DOST",
          "time": "2 hours ago",
          "publishedAt": "2024-10-12T10:00:00Z",
          "category": "technology"
        },
        {
          "id": "DOST_1728674400_002",
          "title": "Philippine Space Program Achieves New Milestone",
          "description": "DOST announces successful deployment of advanced Earth observation satellite, enhancing disaster monitoring capabilities. The satellite will provide real-time data for weather forecasting and environmental monitoring.",
          "link": "https://www.dost.gov.ph/news/philippine-space-program-achieves-new-milestone",
          "image": "https://images.unsplash.com/photo-1446776653964-20c1d3a81b06?w=300&h=200&fit=crop&crop=center",
          "source": "DOST",
          "time": "4 hours ago",
          "publishedAt": "2024-10-12T08:00:00Z",
          "category": "technology"
        },
        {
          "id": "DOST_1728670800_003",
          "title": "Breakthrough in Renewable Energy Research",
          "description": "Filipino scientists develop innovative solar panel technology with 40% higher efficiency, promising cheaper clean energy for households and businesses across the Philippines.",
          "link": "https://www.dost.gov.ph/news/breakthrough-in-renewable-energy-research",
          "image": "https://images.unsplash.com/photo-1509391366360-2e959784a276?w=300&h=200&fit=crop&crop=center",
          "source": "DOST",
          "time": "6 hours ago",
          "publishedAt": "2024-10-12T06:00:00Z",
          "category": "technology"
        },
        
        // NDRRMC Articles (3)
        {
          "id": "NDRRMC_1728678000_001",
          "title": "National Earthquake Drill Conducted Nationwide",
          "description": "Millions of Filipinos participate in simultaneous earthquake drill, testing emergency response protocols across all regions. The exercise aims to improve disaster preparedness and response coordination.",
          "link": "https://www.ndrrmc.gov.ph/news/national-earthquake-drill-conducted-nationwide",
          "image": "https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=300&h=200&fit=crop&crop=center",
          "source": "NDRRMC",
          "time": "2 hours ago",
          "publishedAt": "2024-10-12T10:00:00Z",
          "category": "health"
        },
        {
          "id": "NDRRMC_1728674400_002",
          "title": "Flood Preparedness Campaign Launched",
          "description": "Comprehensive public awareness campaign educates communities on flood risks and evacuation procedures ahead of rainy season. Local government units receive updated emergency response protocols.",
          "link": "https://www.ndrrmc.gov.ph/news/flood-preparedness-campaign-launched",
          "image": "https://images.unsplash.com/photo-1547036967-23d11aacaee0?w=300&h=200&fit=crop&crop=center",
          "source": "NDRRMC",
          "time": "4 hours ago",
          "publishedAt": "2024-10-12T08:00:00Z",
          "category": "health"
        },
        {
          "id": "NDRRMC_1728670800_003",
          "title": "Emergency Communication System Upgraded",
          "description": "New satellite-based communication network ensures uninterrupted emergency coordination during disasters. The system provides backup communications when traditional networks fail.",
          "link": "https://www.ndrrmc.gov.ph/news/emergency-communication-system-upgraded",
          "image": "https://images.unsplash.com/photo-1581833971358-2c8b550f87b3?w=300&h=200&fit=crop&crop=center",
          "source": "NDRRMC",
          "time": "6 hours ago",
          "publishedAt": "2024-10-12T06:00:00Z",
          "category": "technology"
        }
      ],
      "lastUpdated": "2024-10-12T12:00:00Z",
      "totalArticles": 9,
      "sources": ["DOST", "PAGASA", "NDRRMC"],
      "nextUpdate": "2024-10-13T12:00:00Z"
    };
    
    // News Management System
    class NewsManager {
      constructor() {
        this.newsContainer = document.querySelector('.news-container');
        this.currentIndex = 0;
        this.totalItems = 0;
        this.newsData = [];
        this.isPaused = false;
        this.autoAdvanceInterval = null;
        this.isRefreshing = false;
        
        // Don't get button references here - wait for DOM to be ready
        this.prevBtn = null;
        this.nextBtn = null;
        this.refreshBtn = null;
        
        this.init();
      }
      
      async init() {
        // Load existing news from localStorage or fetch new ones
        await this.loadNews();
        this.setupCarousel();
        this.setupAutoFetch();
      }
      
      async loadNews() {
        try {
          // Load news from cached JSON file
          await this.fetchNewsFromCache();
        } catch (error) {
          console.error('Error loading news:', error);
          this.showNewsStatus('Error loading news. Please try again later.', 'error');
        }
      }
      
      async fetchNewsFromCache() {
        try {
          this.showNewsStatus('Loading latest news...', 'info');
          
          // Try to fetch from Firebase Cloud Function (production)
          try {
            const response = await fetch('https://getnews-4hksadkxba-uc.a.run.app');
            if (response.ok) {
              const newsData = await response.json();
              if (newsData.articles && newsData.articles.length > 0) {
                this.newsData = newsData.articles;
                const lastUpdated = new Date(newsData.fetchedAt).toLocaleString();
                this.showNewsStatus(`✅ Loaded ${newsData.articles.length} latest news articles (Auto-fetched every 5 hours). Updated: ${lastUpdated}`, 'success');
                this.renderNews();
                return;
              }
            }
          } catch (fetchError) {
            console.log('Firebase function not available, trying fallback...', fetchError.message);
          }
          
          // Fallback: try to load from embedded cache data (works with file:// protocol)
          if (window.CACHED_NEWS_DATA) {
            const cachedData = window.CACHED_NEWS_DATA;
            if (cachedData.articles && cachedData.articles.length > 0) {
              this.newsData = cachedData.articles;
              this.showNewsStatus(`📄 Loaded ${cachedData.articles.length} sample news articles.`, 'info');
              this.renderNews();
              return;
            }
          }
          
          throw new Error('No cached data available');
          
        } catch (error) {
          console.error('Error loading cached news:', error);
          
          // Only show error message if we don't have any news data yet
          if (!this.newsData || this.newsData.length === 0) {
            this.showNewsStatus('Loading sample news...', 'info');
            // Fallback to sample data if cache fails
            this.loadSampleNews();
          } else {
            console.log('Cache update failed, keeping existing news data');
          }
        }
      }
      
      showNewsStatus(message, type = 'info') {
        console.log(`News Status (${type}): ${message}`);
        
        // Create or update status element
        let statusElement = document.querySelector('.news-status');
        if (!statusElement) {
          statusElement = document.createElement('div');
          statusElement.className = 'news-status';
          
          // Simply append to news section or body - avoid insertBefore issues
          const newsSection = document.querySelector('.news-section');
          if (newsSection) {
            newsSection.appendChild(statusElement);
          } else {
            document.body.appendChild(statusElement);
          }
        }
        
        statusElement.textContent = message;
        statusElement.className = `news-status ${type}`;
        statusElement.style.display = 'block';
        
        // Auto-hide success messages after 5 seconds
        if (type === 'success') {
          setTimeout(() => {
            if (statusElement && statusElement.parentNode) {
              statusElement.style.display = 'none';
            }
          }, 5000);
        }
      }
      
      // Removed old API fetching - now using cached data from Node.js backend
      
      // Utility methods removed - data now comes pre-processed from backend cache
      
      // Fetch counting methods removed - backend handles API rate limiting
      
      formatTime(timestamp) {
        if (!timestamp) return 'Recently';
        
        try {
          const date = new Date(timestamp);
          const now = new Date();
          const diffMs = now - date;
          const diffHours = Math.floor(diffMs / (1000 * 60 * 60));
          const diffDays = Math.floor(diffMs / (1000 * 60 * 60 * 24));
          
          if (diffHours < 1) {
            const diffMins = Math.floor(diffMs / (1000 * 60));
            return diffMins <= 0 ? 'Just now' : `${diffMins} minutes ago`;
          } else if (diffHours < 24) {
            return `${diffHours} hour${diffHours === 1 ? '' : 's'} ago`;
          } else if (diffDays < 7) {
            return `${diffDays} day${diffDays === 1 ? '' : 's'} ago`;
          } else {
            return date.toLocaleDateString();
          }
        } catch (error) {
          console.error('Error formatting time:', error);
          return 'Recently';
        }
      }
      
      renderNews() {
        this.newsContainer.innerHTML = '';
        
        this.newsData.forEach((article, index) => {
          const newsItem = document.createElement('div');
          newsItem.className = 'news-item';
          newsItem.setAttribute('data-source', article.source);
          
          // Truncate description for initial display
          const shortDescription = article.description.length > 150 
            ? article.description.substring(0, 150) + '...' 
            : article.description;
          
          const needsSeeMore = article.description.length > 150;
          
          newsItem.innerHTML = `
            <div class="news-image">
              <img src="${article.image}" alt="${article.title}" onload="this.classList.add('loaded')" onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjIwMCIgdmlld0JveD0iMCAwIDMwMCAyMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIzMDAiIGhlaWdodD0iMjAwIiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik0xMjAgODBIMTgwVjEyMEgxMjBWODBaIiBmaWxsPSIjQ0NDIi8+CjxjaXJjbGUgY3g9IjE0MCIgY3k9IjkwIiByPSI1IiBmaWxsPSIjOTk5Ii8+CjxwYXRoIGQ9Ik0xMzAgMTEwTDE0NSA5NUwxNjAgMTEwSDE3MFYxMjBIMTMwVjExMFoiIGZpbGw9IiM5OTkiLz4KPHRleHQgeD0iMTUwIiB5PSIxNTAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZpbGw9IiM2NjYiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNCIgZm9udC13ZWlnaHQ9ImJvbGQiPk5ld3MgSW1hZ2U8L3RleHQ+Cjwvc3ZnPgo='; this.classList.add('loaded')" loading="lazy">
            </div>
            <div class="news-content">
              <div class="news-source ${article.source}">${article.source}</div>
              <h3 class="news-title">${article.title}</h3>
              <div class="news-description collapsed" data-full="${article.description}" data-short="${shortDescription}">
                <div class="text-content">${shortDescription}</div>
              </div>
              ${needsSeeMore ? '<button class="see-more-btn">See more</button>' : ''}
              <div class="news-meta">
                <span class="news-time">${this.formatTime(article.publishedAt || article.time)}</span>
                <a href="${article.url || article.link}" target="_blank" class="news-link">Read More</a>
              </div>
            </div>
          `;
          
          this.newsContainer.appendChild(newsItem);
          
          // Add see more functionality
          if (needsSeeMore) {
            const seeMoreBtn = newsItem.querySelector('.see-more-btn');
            const description = newsItem.querySelector('.news-description');
            
            seeMoreBtn.addEventListener('click', () => {
              if (description.classList.contains('collapsed')) {
                description.classList.remove('collapsed');
                description.innerHTML = `<div class="text-content">${article.description}</div>`;
                seeMoreBtn.textContent = 'See less';
                this.pauseAutoAdvance(); // Pause auto-advance when expanding
              } else {
                description.classList.add('collapsed');
                description.innerHTML = `<div class="text-content">${shortDescription}</div>`;
                seeMoreBtn.textContent = 'See more';
                this.resumeAutoAdvance(); // Resume auto-advance when collapsing
              }
            });
          }
        });
        
        this.totalItems = this.newsData.length;
        this.currentIndex = 0;
        this.updateCarousel();
      }
      
      setupCarousel() {
        console.log('Setting up carousel...');
        
        // Set up navigation buttons with multiple attempts
        this.setupNavigationButtons();
        
        // Auto-advance carousel every 8 seconds
        this.startAutoAdvance();
      }
      
      setupNavigationButtons() {
        console.log('Setting up carousel navigation buttons...');
        
        // Wait for DOM and then setup buttons
        setTimeout(() => {
          this.prevBtn = document.getElementById('prevBtn');
          this.nextBtn = document.getElementById('nextBtn');
          
          if (this.prevBtn && this.nextBtn) {
            console.log('✅ Carousel buttons found!');
            
            this.prevBtn.addEventListener('click', (e) => {
              e.preventDefault();
              e.stopPropagation();
              console.log('🔙 Previous carousel button clicked!');
              this.prevSlide();
              this.pauseAutoAdvance();
              setTimeout(() => this.resumeAutoAdvance(), 5000);
            });
            
            this.nextBtn.addEventListener('click', (e) => {
              e.preventDefault();
              e.stopPropagation();
              console.log('▶️ Next carousel button clicked!');
              this.nextSlide();
              this.pauseAutoAdvance();
              setTimeout(() => this.resumeAutoAdvance(), 5000);
            });
            
            console.log('✅ Carousel navigation ready!');
          } else {
            console.error('❌ Carousel buttons not found');
          }
        }, 500);
      }
      
      prevSlide() {
        if (this.newsData.length <= 1) return;
        
        this.currentIndex = this.currentIndex > 0 ? this.currentIndex - 1 : this.newsData.length - 1;
        this.updateCarousel();
        console.log(`Previous slide: ${this.currentIndex + 1}/${this.newsData.length}`);
      }
      
      nextSlide() {
        if (this.newsData.length <= 1) return;
        
        this.currentIndex = this.currentIndex < this.newsData.length - 1 ? this.currentIndex + 1 : 0;
        this.updateCarousel();
        console.log(`Next slide: ${this.currentIndex + 1}/${this.newsData.length}`);
      }
      
      startAutoAdvance() {
        // Clear any existing interval first
        if (this.autoAdvanceInterval) {
          clearInterval(this.autoAdvanceInterval);
        }
        
        console.log('🔄 Starting auto-advance (8 second intervals)');
        this.autoAdvanceInterval = setInterval(() => {
          if (!this.isPaused && this.newsData.length > 1) {
            console.log('⏭️ Auto-advancing to next slide...');
            this.nextSlide();
          }
        }, 8000);
      }
      
      pauseAutoAdvance() {
        console.log('⏸️ Auto-advance paused');
        this.isPaused = true;
        // Clear the interval to completely stop auto-advance
        if (this.autoAdvanceInterval) {
          clearInterval(this.autoAdvanceInterval);
          this.autoAdvanceInterval = null;
        }
      }
      
      resumeAutoAdvance() {
        console.log('▶️ Auto-advance resumed');
        this.isPaused = false;
        // Restart the interval
        this.startAutoAdvance();
      }
      
      setupAutoFetch() {
        // Check for cache updates every 5 minutes (reduced from 30 minutes for testing)
        setInterval(async () => {
          console.log('Checking for news cache updates...');
          try {
            await this.fetchNewsFromCache();
          } catch (error) {
            console.log('Auto-refresh failed, will try again later:', error.message);
          }
        }, 5 * 60 * 1000); // 5 minutes in milliseconds
      }
      
      updateCarousel() {
        if (this.newsData.length === 0) {
          console.log('No news data available for carousel');
          return;
        }
        
        // Show only the current news item
        const newsItems = this.newsContainer.querySelectorAll('.news-item');
        console.log(`Found ${newsItems.length} news items in DOM`);
        
        if (newsItems.length === 0) {
          console.log('No news items found in DOM');
          return;
        }
        
        newsItems.forEach((item, index) => {
          if (index === this.currentIndex) {
            item.style.display = 'flex';
            item.style.opacity = '1';
          } else {
            item.style.display = 'none';
            item.style.opacity = '0';
          }
        });
        
        console.log(`Showing article ${this.currentIndex + 1} of ${this.newsData.length}`);
        
        // Update navigation button states
        if (this.prevBtn) {
          this.prevBtn.disabled = false;
        }
        if (this.nextBtn) {
          this.nextBtn.disabled = false;
        }
      }
      
      async manualRefresh() {
        if (this.isRefreshing) {
          return; // Prevent multiple simultaneous refreshes
        }
        
        this.isRefreshing = true;
        this.refreshBtn.disabled = true;
        this.refreshBtn.classList.add('loading');
        this.refreshBtn.textContent = '🔄 Refreshing...';
        
        try {
          this.showNewsStatus('Fetching latest news...', 'info');
          
          // In a real implementation, this would trigger the backend news fetcher
          // For now, we'll simulate a refresh by reloading the cached data
          await new Promise(resolve => setTimeout(resolve, 2000)); // Simulate API call
          
          await this.fetchNewsFromCache();
          this.showNewsStatus('✅ News refreshed successfully!', 'success');
          
        } catch (error) {
          console.error('Manual refresh failed:', error);
          this.showNewsStatus('❌ Failed to refresh news. Please try again.', 'error');
        } finally {
          this.isRefreshing = false;
          this.refreshBtn.disabled = false;
          this.refreshBtn.classList.remove('loading');
          this.refreshBtn.textContent = '🔄 Refresh';
          
          // Hide status after 3 seconds
          setTimeout(() => {
            const statusElement = document.querySelector('.news-status');
            if (statusElement) {
              statusElement.remove();
            }
          }, 3000);
        }
      }
      
      loadSampleNews() {
        // Fallback sample news if API fails
        this.newsData = [
          {
            id: 1,
            title: 'PAGASA Issues Weather Advisory for Tropical Depression',
            description: 'The Philippine Atmospheric, Geophysical and Astronomical Services Administration warns of potential flooding in low-lying areas.',
            image: 'https://via.placeholder.com/300x200?text=Weather+Alert',
            link: 'https://www.pagasa.dost.gov.ph',
            source: 'PAGASA',
            time: '2 hours ago'
          },
          {
            id: 2,
            title: 'DOST Launches New Disaster Monitoring Technology',
            description: 'Department of Science and Technology introduces advanced early warning systems for better disaster preparedness.',
            image: 'https://via.placeholder.com/300x200?text=Technology+Update',
            link: 'https://www.dost.gov.ph',
            source: 'DOST',
            time: '4 hours ago'
          }
        ];
        this.renderNews();
      }
    }
    
    // Force mobile layout for in-app browsers
    function forceMobileLayout() {
      const isMobile = window.innerWidth <= 768 || 
                      /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) ||
                      /Messenger|FBAN|FBAV/i.test(navigator.userAgent) || // Facebook/Messenger
                      /vivo/i.test(navigator.userAgent); // Vivo browser
      
      if (isMobile) {
        document.body.classList.add('mobile-layout');
        console.log('🔥 Mobile layout forced for in-app browser');
      }
    }

    // Mobile Navigation Toggle
    document.addEventListener('DOMContentLoaded', () => {
      console.log('DOM loaded, initializing News Manager...');
      
      // Force mobile layout first
      forceMobileLayout();
      
      new NewsManager();
      
    });
    </script>

    <!-- Script.js removed to prevent caching issues -->
    
    <!-- Inline JavaScript to replace script.js -->
    <script>
        // Mobile Navigation with enhanced mobile detection
        document.addEventListener('DOMContentLoaded', function() {
            console.log('🔧 Setting up mobile navigation...');
            
            // Detect mobile device and browser
            const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
            const isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent);
            const isAndroid = /Android/.test(navigator.userAgent);
            const isOlderBrowser = /Android [4-8]|iPhone OS [6-9]|iPad OS [6-9]/.test(navigator.userAgent);
            
            console.log('📱 Device Detection:', {
                isMobile: isMobile,
                isIOS: isIOS,
                isAndroid: isAndroid,
                isOlderBrowser: isOlderBrowser,
                userAgent: navigator.userAgent
            });
            
            // Browser compatibility checks
            const browserFeatures = {
                fetch: 'fetch' in window,
                promise: 'Promise' in window,
                intersectionObserver: 'IntersectionObserver' in window,
                resizeObserver: 'ResizeObserver' in window,
                scrollBehavior: 'scrollBehavior' in document.documentElement.style,
                cssGrid: CSS.supports && CSS.supports('display', 'grid'),
                cssFlexbox: CSS.supports && CSS.supports('display', 'flex')
            };
            
            console.log('🔧 Browser Features:', browserFeatures);
            
            // Global error handler for mobile debugging
            window.addEventListener('error', function(e) {
                console.error('🚨 JavaScript Error:', e.error);
                console.error('🚨 Error Details:', {
                    message: e.message,
                    filename: e.filename,
                    lineno: e.lineno,
                    colno: e.colno
                });
            });
            
            // Unhandled promise rejection handler
            window.addEventListener('unhandledrejection', function(e) {
                console.error('🚨 Unhandled Promise Rejection:', e.reason);
            });
            
            // Mobile navigation toggle
      const navToggle = document.getElementById('navToggle');
      const navLinks = document.getElementById('navLinks');
      
            console.log('NavToggle element:', navToggle);
            console.log('NavLinks element:', navLinks);
      
      if (navToggle && navLinks) {
                console.log('✅ Mobile navigation elements found!');
        
                // Function to handle mobile navigation toggle
                const handleNavToggle = function(e) {
          e.preventDefault();
          e.stopPropagation();
          
                    console.log('🍔 Hamburger clicked!');
                    console.log('Before toggle - NavLinks has active:', navLinks.classList.contains('active'));
                    console.log('Before toggle - NavToggle has active:', navToggle.classList.contains('active'));
          
          navLinks.classList.toggle('active');
                    navToggle.classList.toggle('active');
                    
                    console.log('After toggle - NavLinks has active:', navLinks.classList.contains('active'));
                    console.log('After toggle - NavToggle has active:', navToggle.classList.contains('active'));
                };
                
                // Add both click and touchstart events for mobile compatibility
                navToggle.addEventListener('click', handleNavToggle);
                navToggle.addEventListener('touchstart', handleNavToggle);
                
                // Ensure proper touch styling for hamburger
                navToggle.style.touchAction = 'manipulation';
                navToggle.style.webkitTouchCallout = 'none';
                navToggle.style.webkitUserSelect = 'none';
                navToggle.style.userSelect = 'none';

                // Close menu when clicking on a link (but don't interfere with smooth scrolling)
        navLinks.querySelectorAll('a').forEach(link => {
                    link.addEventListener('click', (e) => {
            console.log('📱 Menu link clicked, closing menu...');
                        // Don't prevent default here, let the smooth scrolling handler take care of it
                        // Just close the menu
            navToggle.classList.remove('active');
            navLinks.classList.remove('active');
          });
        });
        
        // Close menu when clicking outside
        document.addEventListener('click', (e) => {
          if (!navToggle.contains(e.target) && !navLinks.contains(e.target)) {
            if (navToggle.classList.contains('active')) {
              console.log('👆 Clicked outside menu, closing...');
              navToggle.classList.remove('active');
              navLinks.classList.remove('active');
            }
          }
        });
        
        console.log('✅ Mobile navigation setup complete!');
      } else {
        console.error('❌ Mobile navigation elements not found!');
        console.log('Available elements:', {
          navToggle: document.getElementById('navToggle'),
          navLinks: document.getElementById('navLinks')
        });
      }

            // Success popup event listeners
            const successPopup = document.getElementById('successPopup');
            const successCloseBtn = document.querySelector('.success-close-btn');

            function hideSuccessPopup() {
                const successPopup = document.getElementById('successPopup');
                successPopup.classList.remove('active');
                document.body.style.overflow = 'auto';
            }

            if (successCloseBtn) {
                successCloseBtn.addEventListener('click', hideSuccessPopup);
            }

            if (successPopup) {
                successPopup.addEventListener('click', function(e) {
                    if (e.target === successPopup) {
                        hideSuccessPopup();
                    }
                });
            }
            
            // Smooth scrolling for navigation links with mobile touch support
            const navLinkElements = document.querySelectorAll('.nav-links a[href^="#"]');
            console.log('🔗 Found navigation links:', navLinkElements.length);
            navLinkElements.forEach((link, index) => {
                console.log(`Link ${index}:`, link.getAttribute('href'));
                
                // Function to handle navigation with better mobile support
                const handleNavigation = function(e) {
                    // Prevent default behavior
                    if (e.preventDefault) {
                    e.preventDefault();
                    }
                    if (e.stopPropagation) {
                        e.stopPropagation();
                    }
                    
                    const targetId = this.getAttribute('href');
                    const targetSection = document.querySelector(targetId);
                    
                    console.log('🔗 Navigation link triggered:', targetId);
                    console.log('🎯 Target section found:', targetSection);
                    console.log('📱 Event type:', e.type);
                    
                    if (targetSection) {
                        // Close mobile menu first
                        if (navLinks && navToggle) {
                            navLinks.classList.remove('active');
                            navToggle.classList.remove('active');
                        }
                        
                        // Use different scrolling method for mobile with older browser support
                        setTimeout(() => {
                            // Try multiple scrolling methods for better compatibility
                            if (targetSection.scrollIntoView) {
                                if (browserFeatures.scrollBehavior) {
                        targetSection.scrollIntoView({
                            behavior: 'smooth',
                            block: 'start'
                        });
                                } else {
                                    // Fallback for browsers without smooth scroll
                                    targetSection.scrollIntoView();
                                }
                            } else {
                                // Fallback for older browsers without scrollIntoView
                                const targetTop = targetSection.offsetTop - 80;
                                if (browserFeatures.scrollBehavior) {
                                    window.scrollTo({
                                        top: targetTop,
                                        behavior: 'smooth'
                                    });
                                } else {
                                    // Manual smooth scroll for very old browsers
                                    window.scrollTo(0, targetTop);
                                }
                            }
                            console.log('✅ Scrolled to:', targetId);
                        }, 150);
                    } else {
                        console.error('❌ Target section not found:', targetId);
                        // Let's check what sections actually exist
                        const allSections = document.querySelectorAll('section[id]');
                        console.log('Available sections:', Array.from(allSections).map(s => s.id));
                    }
                    
                    return false;
                };
                
                // Add both click and touchstart events for mobile compatibility
                link.addEventListener('click', handleNavigation);
                link.addEventListener('touchstart', handleNavigation);
                
                // Ensure proper touch styling
                link.style.touchAction = 'manipulation';
                link.style.webkitTouchCallout = 'none';
                link.style.webkitUserSelect = 'none';
                link.style.userSelect = 'none';
            });

            // Download the App button functionality with mobile touch support
            const downloadAppBtn = document.querySelector('a[href="#download-apk"]');
            console.log('📱 Download App button found:', downloadAppBtn);
            
            if (downloadAppBtn) {
                // Function to handle download app button with better mobile support
                const handleDownloadApp = function(e) {
                    // Prevent default behavior
                    if (e.preventDefault) {
                        e.preventDefault();
                    }
                    if (e.stopPropagation) {
                        e.stopPropagation();
                    }
                    
                    const targetElement = document.getElementById('download-apk');
                    console.log('🎯 Download APK target element found:', targetElement);
                    console.log('📱 Event type:', e.type);
                    
                    if (targetElement) {
                        console.log('✅ Scrolling to download-apk FAQ item...');
                        
                        // Scroll to the FAQ section with better mobile support
                        setTimeout(() => {
                            // Try multiple scrolling methods for better compatibility
                            if (targetElement.scrollIntoView) {
                                if (browserFeatures.scrollBehavior) {
                                    targetElement.scrollIntoView({
                                        behavior: 'smooth',
                                        block: 'start'
                                    });
                                } else {
                                    // Fallback for browsers without smooth scroll
                                    targetElement.scrollIntoView();
                                }
                            } else {
                                // Fallback for older browsers without scrollIntoView
                                const targetTop = targetElement.offsetTop - 80;
                                if (browserFeatures.scrollBehavior) {
                                    window.scrollTo({
                                        top: targetTop,
                                        behavior: 'smooth'
                                    });
                                } else {
                                    // Manual smooth scroll for very old browsers
                                    window.scrollTo(0, targetTop);
                                }
                            }
                        }, 100);
                        
                        // Auto-expand the FAQ item after scrolling
                        setTimeout(() => {
                            console.log('🔍 Auto-expanding FAQ item...');
                            targetElement.classList.add('active');
                            
                            // Close other FAQ items
                            document.querySelectorAll('.faq-item').forEach(item => {
                                if (item !== targetElement) {
                                    item.classList.remove('active');
                                }
                            });
                            
                            console.log('✅ FAQ item expanded and others closed');
                        }, 600);
                    } else {
                        console.error('❌ Download APK target element not found!');
                        // Check what FAQ items exist
                        const allFaqItems = document.querySelectorAll('.faq-item');
                        console.log('Available FAQ items:', Array.from(allFaqItems).map(item => item.id || 'no-id'));
                    }
                    
                    return false;
                };
                
                // Add both click and touchstart events for mobile compatibility
                downloadAppBtn.addEventListener('click', handleDownloadApp);
                downloadAppBtn.addEventListener('touchstart', handleDownloadApp);
                
                // Ensure proper touch styling
                downloadAppBtn.style.touchAction = 'manipulation';
                downloadAppBtn.style.webkitTouchCallout = 'none';
                downloadAppBtn.style.webkitUserSelect = 'none';
                downloadAppBtn.style.userSelect = 'none';
            } else {
                console.error('❌ Download App button not found!');
            }
            
            // FAQ Toggle functionality
            const faqItems = document.querySelectorAll('.faq-item');
            console.log('📋 FAQ items found:', faqItems.length);
            faqItems.forEach(item => {
                const question = item.querySelector('.faq-question');
                const answer = item.querySelector('.faq-answer');
                const icon = item.querySelector('.faq-icon');
                
                console.log('FAQ item:', item.id || 'no-id', 'question:', question, 'answer:', answer, 'icon:', icon);
                
                if (question && answer && icon) {
                    question.addEventListener('click', function() {
                        const isActive = item.classList.contains('active');
                        
                        // Close all other FAQ items
                        faqItems.forEach(otherItem => {
                            if (otherItem !== item) {
                                otherItem.classList.remove('active');
                                const otherAnswer = otherItem.querySelector('.faq-answer');
                                const otherIcon = otherItem.querySelector('.faq-icon');
                                if (otherAnswer && otherIcon) {
                                    otherAnswer.style.maxHeight = '0px';
                                    otherIcon.textContent = '+';
                                }
                            }
                        });
                        
                        // Toggle current item
                        if (isActive) {
                            item.classList.remove('active');
                            answer.style.maxHeight = '0px';
                            icon.textContent = '+';
                        } else {
                            item.classList.add('active');
                            // Calculate the actual height needed
                            answer.style.maxHeight = 'none';
                            const height = answer.scrollHeight;
                            answer.style.maxHeight = '0px';
                            // Force reflow
                            answer.offsetHeight;
                            answer.style.maxHeight = height + 'px';
                            icon.textContent = '×';
                        }
                    });
                }
            });
        });
    </script>
    
    <!-- Contact Form JavaScript -->
    <script>
        // Contact Form Functionality - OVERRIDE ALL PREVIOUS VERSIONS
        document.addEventListener('DOMContentLoaded', function() {
            console.log('OVERRIDE VERSION LOADED - NO EXTERNAL CALLS - TIMESTAMP:', new Date().toISOString());
            
            // Force remove any existing event listeners
            const existingForm = document.getElementById('contactForm');
            if (existingForm) {
                const newForm = existingForm.cloneNode(true);
                existingForm.parentNode.replaceChild(newForm, existingForm);
                console.log('FORM CLONED AND REPLACED TO REMOVE OLD EVENT LISTENERS');
            }
            
            const contactPopup = document.getElementById('contactPopup');
            const contactForm = document.getElementById('contactForm');
            const closeBtn = document.querySelector('.contact-close-btn');
            const contactMessage = document.getElementById('contactMessage');
            
            // Open popup when Contact Us button is clicked
            document.querySelector('.primary-btn[href="#contact"]')?.addEventListener('click', function(e) {
                e.preventDefault();
                contactPopup.classList.add('active');
                document.body.style.overflow = 'hidden'; // Prevent background scrolling
            });
            
            // Close popup when X is clicked
            closeBtn.addEventListener('click', closePopup);
            
            // Close popup when clicking outside
            contactPopup.addEventListener('click', function(e) {
                if (e.target === contactPopup) {
                    closePopup();
                }
            });
            
            // Close popup with Escape key
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape' && contactPopup.classList.contains('active')) {
                    closePopup();
                }
            });
            
            // Handle form submission
            const formElement = document.getElementById('contactForm');
            formElement.addEventListener('submit', async function(e) {
                e.preventDefault();
                e.stopPropagation();
                e.stopImmediatePropagation();
                
                console.log('Contact form submission started:', new Date().toISOString());
                
                const submitBtn = formElement.querySelector('.send-btn');
                const formData = new FormData(formElement);
                
                // Check daily email limit first
                if (checkEmailLimit()) {
                    console.log('Daily email limit reached, showing limit message');
                    contactPopup.classList.remove('active');
                    document.body.style.overflow = 'auto';
                    showLimitReachedPopup();
                    return false;
                }
                
                // Disable submit button and show loading
                submitBtn.disabled = true;
                submitBtn.textContent = 'Sending...';
                hideMessage();
                
                try {
                    // Prepare form data
                    const contactData = {
                        firstName: formData.get('firstName'),
                        lastName: formData.get('lastName'),
                        email: formData.get('email'),
                        subject: formData.get('subject'),
                        message: formData.get('message')
                    };
                    
                    console.log('Sending contact form data...');
                    
                    // Send to Firebase Cloud Function
                    const response = await fetch('https://sendcontactemail-4hksadkxba-uc.a.run.app', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify(contactData)
                    });
                    
                    const result = await response.json();
                    
                    if (response.ok && result.success) {
                        // Increment daily email count only on successful send
                        const newCount = incrementDailyEmailCount();
                        console.log(`Email sent successfully. Daily count: ${newCount}/${DAILY_EMAIL_LIMIT}`);
                        
                        // Close contact popup and show success popup
                        contactPopup.classList.remove('active');
                        document.body.style.overflow = 'auto';
                        showSuccessPopup();
                        formElement.reset(); // Clear form
                        console.log('Contact form submitted successfully');
                    } else {
                        throw new Error(result.error || 'Failed to send message');
                    }
                    
                } catch (error) {
                    console.error('Contact form error:', error);
                    showMessage('Nabigo ang pagpapadala ng mensahe. Pakisubukan ulit mamaya o mag-email sa amin direkta sa accizardlucban@gmail.com', 'error');
                } finally {
                    // Re-enable submit button
                    submitBtn.disabled = false;
                    submitBtn.textContent = 'Send';
                }
                
                return false; // Prevent any further processing
            });
            
            function closePopup() {
                contactPopup.classList.remove('active');
                document.body.style.overflow = 'auto'; // Restore scrolling
                hideMessage();
                contactForm.reset(); // Clear form when closing
            }
            
            function showMessage(text, type) {
                contactMessage.textContent = text;
                contactMessage.className = `contact-message ${type}`;
                contactMessage.style.display = 'block';
            }
            
            function hideMessage() {
                contactMessage.style.display = 'none';
                contactMessage.className = 'contact-message';
            }

            // Success popup functionality
            function showSuccessPopup() {
                const successPopup = document.getElementById('successPopup');
                // Reset popup content to success message
                resetSuccessPopup();
                successPopup.classList.add('active');
                document.body.style.overflow = 'hidden';
            }

        });
    </script>
</body>
</html>

